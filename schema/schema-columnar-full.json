{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://risingprogress.com/schema/schema-columnar-full.json",
  "title": "PRGS Columnar Project Progress Schema",
  "type": "object",
  "$comment": [
    "AI_ANALYSIS_PROMPT:",
    "",
    "You are analyzing project progress data provided in a columnar JSON schema derived from a PRGS ledger.",
    "",
    "All numeric values are authoritative and must not be altered or recomputed.",
    "",
    "Time-series data is an immutable ledger; past entries must be treated as final.",
    "Missing values are represented as empty strings and should be interpreted as null.",
    "",
    "Gaps in time series are expected. Linear interpolation between percentage-based series may be assumed.",
    "",
    "actualPct values may exceed 100%. plannedPct and sectionPct are typically 0\u2013100 but are not enforced.",
    "",
    "Cost values represent relative weighting. Higher-cost scopes are more important to analysis.",
    "",
    "Arrays are index-aligned by contract.",
    "Identifiers are stable and unique within the project.",
    "Labels provide contextual meaning but do not define identity.",
    "",
    "Analyze trends, risks, anomalies, and weighting-aware impacts strictly from the provided data."
  ],
  "required": [
    "meta",
    "project",
    "scopes",
    "timeseries"
  ],
  "properties": {
    "meta": {
      "type": "object",
      "$comment": "Metadata describing the export format and source.",
      "required": [
        "formatVersion",
        "source"
      ],
      "properties": {
        "formatVersion": {
          "type": "integer",
          "$comment": "PRGS format version."
        },
        "source": {
          "type": "string",
          "$comment": "Exporter identifier."
        }
      }
    },
    "project": {
      "type": "object",
      "$comment": "High-level project attributes.",
      "properties": {
        "name": {
          "type": "string",
          "$comment": "Human-readable project name."
        },
        "datesaved": {
          "type": "string",
          "$comment": "Date file was saved (YYYY-MM-DD)."
        },
        "timesaved": {
          "type": "string",
          "$comment": "Time file was saved (HH:MM)."
        },
        "startup": {
          "type": "string",
          "$comment": "Startup date or marker; may be blank."
        },
        "markerLabel": {
          "type": "string",
          "$comment": "Baseline/start marker label."
        }
      }
    },
    "scopes": {
      "type": "object",
      "$comment": "Current scope state in columnar form. All arrays are index-aligned.",
      "properties": {
        "scopeId": {
          "type": "array",
          "$comment": "Unique identifier for each scope (stable within project)."
        },
        "label": {
          "type": "array",
          "$comment": "Human-readable scope name."
        },
        "start": {
          "type": "array",
          "$comment": "Scope start date."
        },
        "end": {
          "type": "array",
          "$comment": "Scope end date."
        },
        "cost": {
          "type": "array",
          "$comment": "Relative cost or weighting of the scope."
        },
        "progressValue": {
          "type": "array",
          "$comment": "Reported scope progress percent."
        },
        "unitsToDate": {
          "type": "array",
          "$comment": "Units installed to date; blank for percent-based scopes."
        },
        "totalUnits": {
          "type": "array",
          "$comment": "Total units for the scope; blank for percent-based scopes."
        },
        "unitsLabel": {
          "type": "array",
          "$comment": "Units of measure (%, Feet, etc.)."
        },
        "sectionName": {
          "type": "array",
          "$comment": "Human-readable section name."
        },
        "sectionID": {
          "type": "array",
          "$comment": "Section identifier for grouping scopes."
        }
      },
      "additionalProperties": false
    },
    "timeseries": {
      "type": "object",
      "$comment": "Immutable ledger of historical snapshots.",
      "required": [
        "project",
        "scopes",
        "sections"
      ],
      "properties": {
        "project": {
          "type": "object",
          "$comment": "Project-level progress curves over time.",
          "properties": {
            "date": {
              "type": "array",
              "$comment": "Snapshot date."
            },
            "baselinePct": {
              "type": "array",
              "$comment": "Baseline cumulative percent complete."
            },
            "plannedPct": {
              "type": "array",
              "$comment": "Planned cumulative percent complete."
            },
            "dailyActual": {
              "type": "array",
              "$comment": "Daily incremental actual progress."
            },
            "actualPct": {
              "type": "array",
              "$comment": "Actual cumulative percent complete."
            }
          },
          "additionalProperties": false
        },
        "scopes": {
          "type": "object",
          "$comment": "Scope-level historical snapshots.",
          "properties": {
            "historyDate": {
              "type": "array",
              "$comment": "Snapshot date."
            },
            "scopeId": {
              "type": "array",
              "$comment": "Scope identifier."
            },
            "label": {
              "type": "array",
              "$comment": "Scope label at snapshot time."
            },
            "start": {
              "type": "array",
              "$comment": "Scope start date at snapshot."
            },
            "end": {
              "type": "array",
              "$comment": "Scope end date at snapshot."
            },
            "cost": {
              "type": "array",
              "$comment": "Scope cost or weighting at snapshot."
            },
            "perDay": {
              "type": "array",
              "$comment": "Planned percent per day for the scope."
            },
            "actualPct": {
              "type": "array",
              "$comment": "Actual percent complete at snapshot."
            },
            "unitsToDate": {
              "type": "array",
              "$comment": "Units installed at snapshot."
            },
            "totalUnits": {
              "type": "array",
              "$comment": "Total units at snapshot."
            },
            "unitsLabel": {
              "type": "array",
              "$comment": "Units of measure."
            },
            "plannedtodate": {
              "type": "array",
              "$comment": "Planned cumulative percent complete at snapshot."
            },
            "sectionName": {
              "type": "array",
              "$comment": "Section name at snapshot."
            },
            "sectionID": {
              "type": "array",
              "$comment": "Section identifier at snapshot."
            }
          },
          "additionalProperties": false
        },
        "sections": {
          "type": "object",
          "$comment": "Section-level rollups by snapshot date.",
          "properties": {
            "historyDate": {
              "type": "array",
              "$comment": "Snapshot date."
            },
            "sectionID": {
              "type": "array",
              "$comment": "Section identifier."
            },
            "sectionTitle": {
              "type": "array",
              "$comment": "Section name."
            },
            "sectionWeight": {
              "type": "array",
              "$comment": "Relative weight of the section."
            },
            "sectionPct": {
              "type": "array",
              "$comment": "Actual cumulative percent complete for the section."
            },
            "sectionPlannedPct": {
              "type": "array",
              "$comment": "Planned cumulative percent complete for the section."
            }
          },
          "additionalProperties": false
        }
      }
    }
  }
}
