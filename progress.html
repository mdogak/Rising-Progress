<!DOCTYPE html>

<html lang="en">
<head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VV4YLNW79F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VV4YLNW79F');
</script>
  
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Rising Progress</title>

<!-- Chart.js + Annotation plugin -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
<script>
  if (window['chartjs-plugin-annotation'] && window.Chart) {
    Chart.register(window['chartjs-plugin-annotation']);
  }
</script>

<link rel="stylesheet" href="css/progress.css">
</head>
<body>
<div class="wrap">
<datalist id="unitsList">
<option value="%"></option>
<option value="Feet"></option>
<option value="Inches"></option>
<option value="Qty"></option>
<option value="Yd^3"></option>
<option value="Meters"></option>
<option value="Centimeters"></option>
</datalist>
<!-- Big Chart Card -->
<div class="card" style="margin-top:16px">
<div class="chart-header">
<div class="left input-inline">
<label for="projectName">Project Name:</label>
<input id="projectName" placeholder="e.g. West Pipeline"/>
</div>
<div class="right input-inline" style="margin-left:auto; gap:6px">
<input type="checkbox" id="labelToggle" checked style="accent-color:grey; width:16px; height:16px; margin-right:-35px; vertical-align:middle;margin-top:30px;"><label for="startupLabelInput">Label:</label>
<input class="inline-skinny" id="startupLabelInput" value="Baseline Complete"/>
<input id="projectStartup" type="date"/>
</div>
</div>
<div style="position: relative; padding-bottom: 0;"><canvas id="progressChart"></canvas><img src="risingprogress.png" style="position: absolute; right: 50px; bottom: 85px; height: 50px; width: auto; z-index: 10; pointer-events: none;"/></div>
<div class="custom-legend" id="customLegend"></div>
<div class="small" id="bpStats" style="margin-top:6px; display:flex; gap:16px;"></div>
<div class="pill" id="planDelta" style="margin-top:8px"></div>
</div>
<!-- Scopes -->
<div class="card" style="margin-top:16px">
<div style="display:flex;justify-content:space-between;align-items:center">
<h2>Scopes</h2>
</div>
<div class="toolbar" style="margin:8px 0 4px 0">

<button id="toolbarSave">ðŸ’¾ Save Project</button>
<div id="saveDropdown" style="display:none; position:absolute; background:white; border:1px solid #ccc; z-index:1000;">
  <div id="saveCSV" style="padding:8px; cursor:pointer;">Save as CSV</div>
  <div id="saveXML" style="padding:8px; cursor:pointer;">Save as XML</div>
</div>

<div style="position:relative;"><button id="toolbarLoad">ðŸ“‚ Load Project â–¾</button><div id="loadDropdown" style="display:none; position:absolute; background:white; border:1px solid #ccc; z-index:1000;"><div data-act="open" style="padding:8px; cursor:pointer;">Open File</div><div data-act="default" style="padding:8px; cursor:pointer;">Default</div><div data-act="pipeline" style="padding:8px; cursor:pointer;">Pipeline</div><div data-act="mech" style="padding:8px; cursor:pointer;">Mech Facility</div><div data-act="ie" style="padding:8px; cursor:pointer;">I&E Facility</div></div></div>
<button id="toolbarClear">ðŸ”„ Clear</button>
</div>
<div class="row head" style="margin-top:8px">
<div>Scope</div>
<div>Start</div>
<div>End</div>
<div>Cost ($) or<br/>% Weight</div>
<div>Total Units<br/>(if Units)</div>
<div>% or Units<br/>to Date</div>
<div>Units</div>
<div class="small" data-k="plannedLabel">Planned % or<br/>Units to Date</div>
<div class="center">Row<br/>Actions</div>
</div>
<div id="scopeRows"></div>
</div>
<!-- Controls BELOW Scope Tracking -->
<div class="card" style="margin-top:16px">
<div class="toolbar" id="summaryBar">
<button class="btn-primary" id="snapshot">ðŸ“ˆ Add to History</button>
<span class="pill">Current Progress: <strong id="totalActual">0.00%</strong> <input id="historyDate" style="margin-left:6px" type="date"/></span>
</div>
</div>
<!-- History + Baseline -->
<div class="stack-when-narrow" style="margin-top:16px">
<div class="card narrow">
<div style="display:flex;align-items:center;gap:8px">
<h2>History</h2>
<button id="baselineBtn">ðŸ§± Baseline Schedule</button>
</div>
<table id="dailyTable" style="margin-top:8px;width:auto">
<thead>
<tr>
<th>Date</th>
<th class="right">Baseline %</th>
<th class="right">Planned %</th>
<th class="right">Actual %</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>
</div>
</div>

<script src="js/progress.js"></script>
</body>
</html>

